<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title></title>
    <link rel="stylesheet" type="text/css" href="/wjinc/default/css/style.css<?=$this->sversion?>">
    <link rel="stylesheet" type="text/css" href="/wjinc/default/css/font.css<?=$this->sversion?>">
    <script src="/wjinc/default/js/jquery.min.js<?=$this->sversion?>"></script>
<!--     <script src="/wjinc/default/js/scroll.js<?=$this->sversion?>"></script> -->
</head>
<body class="body">
<input class="f_name" type="hidden" value="<?=$this->user['nickname']?>">
<div class="wrap_box newdh">
	<div class="topfix">
		<div class="top dx tc">
			<div class="fx top_bor">
				<p class="col666">距离<sapn class="qishu1"></sapn>期截止</p>
				<div class="col_red f34"><span class="gameo_minute"></span>分<span class="gameo_second"></span>秒</div>
			</div>
			<div class="fx">
				<p class="col666">余额</p>
				<div class="col_red f34">6302.5元</div>
			</div>
		</div>
		<ul class="toplist">
			<li class="top_title clearfix f24">
				<span class="col666 qi_mal">第<span class="qishu2">2309331</span>期</span>
				<span class="qi_num">5</span>
				<span class="col_red">+</span>
				<span class="qi_num">5</span>
				<span class="col_red">+</span>
				<span class="qi_num">5</span>
				<span class="col_red">=</span>
				<span class="qi_num qi_lv">15</span>（大、小）
				<span class="iconfont icon-xialajiantou fr qi_mar colc6c js_xia"></span>
			</li>
			<li class="top_title clearfix f26">
				<span class="col666 qi_mal">第<span class="qishu2">2309331</span>期</span>
				<span class="qi_num">5</span>
				<span class="col_red">+</span>
				<span class="qi_num">5</span>
				<span class="col_red">+</span>
				<span class="qi_num">5</span>
				<span class="col_red">=</span>
				<span class="qi_num qi_lv">15</span>（大、小）
				<span class="iconfont icon-xialajiantou fr qi_mar colc6c js_xia"></span>
			</li>
			<li class="top_title clearfix f26">
				<span class="col666 qi_mal">第<span class="qishu2">2309331</span>期</span>
				<span class="qi_num">5</span>
				<span class="col_red">+</span>
				<span class="qi_num">5</span>
				<span class="col_red">+</span>
				<span class="qi_num">5</span>
				<span class="col_red">=</span>
				<span class="qi_num qi_lv">15</span>（大、小）
				<span class="iconfont icon-xialajiantou fr qi_mar colc6c js_xia"></span>
			</li>		</ul>

	</div>
	<div class="top_padding">
		<ul class="d_box">
			<li class="d_left">
				<div class="tc col999 f24">2018-07-22  11:52</div>
				<div class="clearfix d_content">
					<div class="d_float"><img class="tx" src="/wjinc/default/images/tx.png"></div>
					<div class="d_float d_w">
						<p class="col999 f24">王恩龙</p>
						<div class="bg_red">
							<div class="f30 clearfix fff d_title">
								<div class="fl">
									<span class="iconfont icon-shijian"></span> 第<span>2309331期</span>								
								</div>
								<div class="fr">投注类型：<span>双</span></div>
							</div>
							<div class="f40 fff"><span class="iconfont icon-qiandai1 f40"></span> 100元</div>
						</div>
					</div>
				</div>
			</li>
			<li class="d_right">
				<div class="tc col999 f24">2018-07-22  11:52</div>
				<div class="clearfix d_content">
					<div class="d_float"><img class="tx" src="/wjinc/default/images/tx.png"></div>
					<div class="d_float d_w">
						<p class="col999 f24 tr">王恩龙</p>
						<div class="bg_red">
							<div class="f30 clearfix fff d_title">
								<div class="fl">
									<span class="iconfont icon-shijian"></span> 第<span>2309331期</span>								
								</div>
								<div class="fr">投注类型：<span>双</span></div>
							</div>
							<div class="f40 fff"><span class="iconfont icon-qiandai1 f40"></span> 100元</div>
						</div>
					</div>
				</div>
			</li>
			<li class="d_center">
				<div class="f24 tc"><div class="d_text1">欢迎<span class="col_red">LD888</span>进入房间</div></div>
			</li>
			<li class="d_center">
				<div class="f30 d_text2"><span class="col_red">[2309331期]</span>单注<span class="col_red">1元</span>起，<span class="col_red">20000元</span>封顶，总注<span class="col_red">3000000元</span>封顶<br><span class="col_red">★★现状可以开始投注★★</span></div>
			</li>
			<li class="d_center">
				<div class="d_text2"><span class="col_red">[2309331期]</span>恭喜<span class="col_red">led888</span>已中2倍，共获得<span class="col_red">200元</span></div>
			</li>
			<li class="d_center">
				<div class="d_text2"><span class="col_red">[2309331期]已封盘</span>，下注结果已系统开奖为标准，如有异议，请及时联系客服</div>
			</li>
			<li class="d_left">
				<div class="tc col999 f24">2018-07-22  11:52</div>
				<div class="clearfix d_content">
					<div class="d_float"><img class="tx" src="/wjinc/default/images/tx.png"></div>
					<div class="d_float d_w">
						<p class="col999 f24">王恩龙</p>
						<div class="bg_red">
							<div class="f30 clearfix fff d_title">
								<div class="fl">
									<span class="iconfont icon-shijian"></span> 第<span>2309331期</span>								
								</div>
								<div class="fr">投注类型：<span>双</span></div>
							</div>
							<div class="f40 fff"><span class="iconfont icon-qiandai1 f40"></span> 100元</div>
						</div>
					</div>
				</div>
			</li>
		</ul>

		<div class="top_text">
			
			
			
			
		</div>
	</div>
	<div class="tc fff tz_bg"><div class="tz_btns tc">投注</div></div>
	<div class="pop_wrap hide">
		<div class="mask"></div>
		<div class="pop_box ">
			<div class="tc wf_pos">
				<span class=" wf_n f30">大小单双</span>
				<span class=" wf_n f30 hide">猜数字</span>
				<span class=" wf_n f30 hide">特殊玩法</span>
				<span class="iconfont icon-sanjiaoleft wf_btn1  wf_btn col_red" data-index="0" data-add="jian"></span>
				<span class="iconfont icon-sanjiaoright wf_btn2 wf_btn col_red" data-index="0" data-add="jia"></span>
			</div>
			<ul class="wf_cont">
				<li class="wf_cont1">
					<div class="col999 tc f24">中奖和值：14 15 16 17 18 19 20 21 22 23 24 25 26 27</div>
					<div class="wf_zhi">
						<ul class="wf_zhi1 clearfix">
							<li class="tc fl">
								<div class="wf_z">
								<div class="c_title" data-title="大">大</div>
								<div class="col_red c_val" data-value="123">1.95</div>
								</div>
							</li>
							<li class="tc fl">
								<div class="wf_z">
								<div class="c_title" data-title="小">小</div>
								<div class="col_red c_val" data-value="123">1.95</div>
								</div>
							</li>
							<li class="tc fl">
								<div class="wf_z">
								<div class="c_title" data-title="单">单</div>
								<div class="col_red c_val" data-value="123">1.95</div>
								</div>
							</li>
							<li class="tc fl">
								<div class="wf_z">
								<div class="c_title" data-title="双">双</div>
								<div class="col_red c_val" data-value="123">1.95</div>
								</div>
							</li>
							<li class="tc fl">
								<div class="wf_z">
								<div class="c_title" data-title="大单">大单</div>
								<div class="col_red c_val" data-value="123">1.95</div>
								</div>
							</li>
							<li class="tc fl">
								<div class="wf_z">
								<div class="c_title" data-title="小单">小单</div>
								<div class="col_red c_val" data-value="123">1.95</div>
								</div>
							</li>
							<li class="tc fl">
								<div class="wf_z">
								<div class="c_title" data-title="大双">大双</div>
								<div class="col_red c_val" data-value="123">1.95</div>
								</div>
							</li>
							<li class="tc fl">
								<div class="wf_z">
								<div class="c_title" data-title="小双">小双</div>
								<div class="col_red c_val" data-value="123">1.95</div>
								</div>
							</li>
							<li class="tc fl">
								<div class="wf_z">
								<div class="c_title" data-title="极大">极大</div>
								<div class="col_red c_val" data-value="123">1.95</div>
								</div>
							</li>
							<li class="tc fl">
								<div class="wf_z">
								<div class="c_title" data-title="极小">极小</div>
								<div class="col_red c_val" data-value="123">1.95</div>
								</div>
							</li>
						</ul>
					</div>	
				</li>
				<li class="wf_cont2 hide">
					<div class="col999 tc f24">中奖号码：0</div>
					<div class="wf_zhi">
						<ul class="wf_zhi1 clearfix">
							<li class="tc fl">
								<div class="wf_z">
								<div class="c_title" data-title="0">0</div>
								<div class="col_red c_val" data-value="123">666</div>
								</div>
							</li>
							<li class="tc fl">
								<div class="wf_z">
								<div class="c_title" data-title="1">1</div>
								<div class="col_red c_val" data-value="123">100</div>
								</div>
							</li>
							<li class="tc fl">
								<div class="wf_z">
								<div class="c_title" data-title="2">2</div>
								<div class="col_red c_val" data-value="123">50</div>
								</div>
							</li>
							<li class="tc fl">
								<div class="wf_z">
								<div class="c_title" data-title="3">3</div>
								<div class="col_red c_val" data-value="123">40</div>
								</div>
							</li>
							<li class="tc fl">
								<div class="wf_z">
								<div class="c_title" data-title="4">4</div>
								<div class="col_red c_val" data-value="123">30</div>
								</div>
							</li>
							<li class="tc fl">
								<div class="wf_z">
								<div class="c_title" data-title="5">5</div>
								<div class="col_red c_val" data-value="123">25</div>
								</div>
							</li>
							<li class="tc fl">
								<div class="wf_z">
								<div class="c_title" data-title="6">6</div>
								<div class="col_red c_val" data-value="123">15</div>
								</div>
							</li>
							<li class="tc fl">
								<div class="wf_z">
								<div class="c_title" data-title="7">7</div>
								<div class="col_red c_val" data-value="123">15</div>
								</div>
							</li>
							<li class="tc fl">
								<div class="wf_z">
								<div class="c_title" data-title="8">8</div>
								<div class="col_red c_val" data-value="123">14</div>
								</div>
							</li>
							<li class="tc fl">
								<div class="wf_z">
								<div class="c_title" data-title="9">9</div>
								<div class="col_red c_val" data-value="123">14</div>
								</div>
							</li>
						</ul>
					</div>	
				</li>
				<li class="wf_cont3 hide">
					<div class="col999 tc f24">中奖号码：0</div>
					<div class="wf_zhi">
						<ul class="wf_zhi1 wf_zhi2 clearfix">
							<li class="tc fl">
								<div class="wf_z">
								<div class="c_title" data-title="红">红</div>
								<div class="col_red c_val" data-value="123">2.4</div>
								</div>
							</li>
							<li class="tc fl">
								<div class="wf_z">
								<div class="c_title" data-title="绿">绿</div>
								<div class="col_red c_val" data-value="123">2.6</div>
								</div>
							</li>
							<li class="tc fl">
								<div class="wf_z">
								<div class="c_title" data-title="蓝">蓝</div>
								<div class="col_red c_val" data-value="123">2.8</div>
								</div>
							</li>
							<li class="tc fl">
								<div class="wf_z">
								<div class="c_title" data-title="豹子">豹子</div>
								<div class="col_red c_val" data-value="123">50</div>
								</div>
							</li>
							<li class="tc fl" style="opacity: 0">
								<div class="wf_z">
								<div>&nbsp</div>
								<div class="col_red c_val">&nbsp</div>
								</div>
							</li>
						</ul>
					</div>	
				</li>
			</ul>
			<form class="form">
				<input type="hidden" class="f_number" name="number" value="2309331">
				<input type="hidden" class="f_title" name="name" value="">
				<input type="hidden" class="f_val" name="val" value="">
                <input type="hidden" class="f_dan" name="beishu" value="2">
				<div class="pos_bs clearfix f30">
					<div class="fl">倍数</div>
					<div class="fl pos_b1">
						<span class="fl iconfont icon-jianhao f36 col999 js_jia" data-value="jian"></span>
						<input class="fl col666 cp_input f_input f_beishu" type="tel" name="beishu" value="1">
						<span class="fl iconfont icon-untitled44 f36 col999 js_jia" data-value="jia"></span>
					</div>
					<div class="sure_btn fr tc fff">确认投注</div>
				</div>
			</form>
		</div>
	</div>
	<style>
	.hi_pop{ position: fixed;left:0;top:0;width:100%; height:100%; }
	.hi_mask{position: fixed;left:0;top:0;width:100%; height:100%; background: rgba(0,0,0,0.5); }
	.hi_t{ position: fixed;left:50%;top:50%;width:80%;transform: translate(-50%,-50%); background:#fff; border-radius: .2rem; padding:.2rem 0; }
	.hi_msg{ padding:.2rem 0; }
	.hi_btn{  color:#0079fe;border-top:1px solid #eee; padding:.2rem 0 0 0; }
	</style>
	<div class="hi_pop hide">
		<div class="hi_mask"></div>
		<div class="hi_t">
			<div class="tc f30">提示</div>
			<div class="hi_msg tc f24">请填写投注金额</div>
			<div class="hi_btn tc">确定</div>
		</div>
	</div>
</div>		
<script src="/wjinc/default/js/newdh.js<?=$this->sversion?>"></script>
<script>
    $(function(){
        var wsurl = 'ws://47.74.242.161:9009/socket.php';
        var websocket;
        var i = 0;
        if(window.WebSocket){
            websocket = new WebSocket(wsurl);

            //连接建立
            websocket.onopen = function(evevt){
                console.log("Connected to WebSocket server.");
        //用户进来
        var name = $('.f_name').val();
        var msg ={
            type:'system',
            name:name
        };
        websocket.send(JSON.stringify(msg)); 
                // $('.show-area').append('<p class="bg-info message"><i class="glyphicon glyphicon-info-sign"></i>Connected to WebSocket server!</p>');
            }
            //收到消息
            websocket.onmessage = function(event) {
                var msg = JSON.parse(event.data); //解析收到的json消息数据
                var type = msg.type; 
                i++;
                console.log(msg)
                if(type == 'usermsg'){
                	var html ='';
					html+=  '<li class="d_right">'+
							'	<div class="tc col999 f24">'+msg.time+'</div>'+
							'	<div class="clearfix d_content">'+
							'		<div class=" d_float"><img class="tx" src="/wjinc/default/images/tx.png"></div>'+
							'		<div class=" d_float d_w">'+
							'			<p class="col999 f24 tr">'+msg.name+'</p>'+
							'			<div class="bg_red">'+
							'				<div class="f30 clearfix fff d_title">'+
							'					<div class="fl">'+
							'						<span class="iconfont icon-shijian"></span> 第<span>'+msg.number+'期</span>'+			
							'					</div>'+
							'					<div class="fr">投注类型：<span>'+msg.title+'</span></div>'+
							'				</div>'+
							'				<div class="f40 fff"><span class="iconfont icon-qiandai1 f40"></span> '+msg.money+'元</div>'+
							'			</div>'+
							'		</div>'+
							'	</div>'+
							'</li>';
					$(".d_box").append(html);
                }
                if(type == 'system'){
                    var cls = msg.class;
                	var html ='';
                    console.log(111);
                    if(cls==1){
                        html+=  '<li class="d_center">'+
                                '	<div class="f24 tc"><div class="d_text1">欢迎<span class="col_red">'+msg.name+'</span>进入房间</div></div>'+
                                '</li>'
                    }else if(cls==2){
                        html+=  '<li class="d_center">'+
                                '	<div class="f30 d_text2"><span class="col_red">['+msg.number+'期]</span>单注<span class="col_red">'+msg.single+'元</span>起，<span class="col_red">'+msg.cap+'元</span>封顶，总注<span class="col_red">'+msg.allnum+'元</span>封顶<br><span class="col_red">★★现状可以开始投注★★</span></div>'+
                                '</li>'
                    }else if(cls==3){
                        html+=  '<li class="d_center">'+
                                '	<div class="d_text2"><span class="col_red">['+msg.number+'期]已封盘</span>，下注结果已系统开奖为标准，如有异议，请及时联系客服</div>'+
                                '</li>'
                    }else if(cls==4){
                        html+=  '<li class="d_center">'+
                                '	<div class="d_text2"><span class="col_red">['+msg.number+'期]</span>恭喜<span class="col_red">'+msg.name+'</span>已中2倍，共获得<span class="col_red">'+msg.winmoney+'元</span></div>'+
                                '</li>'
                    }else if(cls==5){      
						html+=  '<li class="d_left">'+
								'	<div class="tc col999 f24">'+msg.time+'</div>'+
								'	<div class="clearfix d_content">'+
								'		<div class=" d_float"><img class="tx" src="/wjinc/default/images/tx.png"></div>'+
								'		<div class=" d_float d_w">'+
								'			<p class="col999 f24">'+msg.name+'</p>'+
								'			<div class="bg_red">'+
								'				<div class="f30 clearfix fff d_title">'+
								'					<div class="fl">'+
								'						<span class="iconfont icon-shijian"></span> 第<span>'+msg.number+'期</span>'+			
								'					</div>'+
								'					<div class="fr">投注类型：<span>'+msg.title+'</span></div>'+
								'				</div>'+
								'				<div class="f40 fff"><span class="iconfont icon-qiandai1 f40"></span> '+msg.money+'元</div>'+
								'			</div>'+
								'		</div>'+
								'	</div>'+
								'</li>';
                    }
					$(".d_box").append(html);
                }
                window.scrollTo(0,document.body.scrollHeight); 
                $('#message').val(''); 
                window.location.hash = '#'+i;
            }

            //发生错误
            websocket.onerror = function(event){
                i++;
                console.log("Connected to WebSocket server error");
                $('.show-area').append('<p class="bg-danger message"><a name="'+i+'"></a><i class="glyphicon glyphicon-info-sign"></i>Connect to WebSocket server error.</p>');
                window.location.hash = '#'+i;
            }

            //连接关闭
            websocket.onclose = function(event){
                i++;
                console.log('websocket Connection Closed. ');
                $('.show-area').append('<p class="bg-warning message"><a name="'+i+'"></a><i class="glyphicon glyphicon-info-sign"></i>websocket Connection Closed.</p>');
                window.location.hash = '#'+i;
            }

            function send(){
                var number = $('.f_number').val();
                var val = $('.f_val').val();
                var title = $('.f_title').val();
                var input = $('.f_input').val();
                var beishu = $('.f_beishu').val();
                var dan = $('.f_dan').val();
                var name = $('.f_name').val();
                var money = dan*beishu;
                if(!title){
                	$(".hi_msg").text('请选择投注内容');
                    $(".hi_pop").show();
                    return false;
                }
                var msg = {
                    number: number,
                    val: val,
                    title: title,
                    input: input,
                    name: name,
                    money: money,
                    beishu: beishu,
                    dan:dan,
                    type:'usermsg'
                };
                try{  
                	console.log(msg);
                    websocket.send(JSON.stringify(msg)); 
                    $(".pop_wrap").hide();
                } catch(ex) {  
                    console.log(ex);
                }  
            }

            
        }
        else{
            alert('该浏览器不支持web socket');
        }
        //提交
        $(".sure_btn").click(function(){
            send();
        })
    });    
</script> 
</body>
</html>
